{"ast":null,"code":"import auth from '@/assets/auth';\nimport MessageAnnounce from './MessageAnnounce.vue';\nexport default {\n  data() {\n    return {\n      announce: null,\n      registrationsDesk: [],\n      filter: '',\n      newreg: {\n        name: '',\n        surname: '',\n        company: '',\n        website: '',\n        my_company_is: '',\n        role: '',\n        email: ''\n      }\n    };\n  },\n  components: {\n    MessageAnnounce\n  },\n  mounted() {\n    this.grabAllRegistrations();\n  },\n  computed: {\n    filteredRows() {\n      return this.registrationsDesk.filter(row => {\n        const company = row.company.toString().toLowerCase();\n        const name = row.name.toLowerCase();\n        const surname = row.surname.toLowerCase();\n        const searchTerm = this.filter.toLowerCase();\n        return company.includes(searchTerm) || name.includes(searchTerm) || surname.includes(searchTerm);\n      });\n    }\n  },\n  methods: {\n    async updateAttendance(id) {\n      console.log(id);\n    },\n    async grabAllRegistrations() {\n      this.registrationsList = [];\n      const url = auth.allRegistrations;\n      const headers = {\n        credentials: 'same-origin',\n        'Content-Type': 'application/json',\n        'X-WP-Nonce': this.nonce\n      };\n      fetch(url, {\n        method: 'GET',\n        headers\n      }).then(result => result.json()).then(result => {\n        this.registrationsDesk = result;\n      });\n    },\n    async adHocRegistration() {\n      if (!this.oneToEdit.name || !this.oneToEdit.surname || !this.oneToEdit.email || !this.oneToEdit.company || !this.oneToEdit.office_phone) {\n        this.announce = ['Hold it right there...', 'You need to supply all required fields (name, surname, company, email.)'];\n        return;\n      }\n      const data = JSON.stringify(this.newreg);\n      const url = auth.adHocRegistration;\n      const headers = {\n        credentials: 'same-origin',\n        'Content-Type': 'application/json',\n        'X-WP-Nonce': this.nonce\n      };\n      fetch(url, {\n        method: 'POST',\n        headers,\n        body: data\n      }).then(this.oneToEdit = null).then(result => result.json()).then(result => {\n        this.announce = result;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA4FA;AACA;AAEA;EAEAA;IACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACA;QACA;QACA;QACA;QACA;QAEA,uCACAX,6BACAC;MACA;IACA;EACA;EACAW;IACA;MACAC;IACA;IACA;MACA;MACA;MACA;QACAC;QACA;QACA;MACA;MACAC;QAAAC;QAAAC;MAAA,GACAC,8BACAA;QAAA;MAAA;IACA;IACA;MACA,gFACA;QACA;QACA;MACA;MACA;MACA;MACA;QACAJ;QACA;QACA;MACA;MACAC;QAAAC;QAAAC;QAAAE;MAAA,GACAD,4BACAA,8BACAA;QAAA;MAAA;IACA;EACA;AACA","names":["data","announce","registrationsDesk","filter","newreg","name","surname","company","website","my_company_is","role","email","components","MessageAnnounce","mounted","computed","filteredRows","methods","console","credentials","fetch","method","headers","then","body"],"sourceRoot":"src/components","sources":["FrontDesk.vue"],"sourcesContent":["<template>\r\n    <div class=\"front-desk sub-section\">\r\n        <message-announce v-if=\"announce\" :message=\"announce\" @closeMessage=\"killMessage()\" />\r\n        <div class=\"my-front-desk\">\r\n          <div class=\"registrations-list\">\r\n            <h3>Current registrations</h3>\r\n            <table>\r\n              <div class=\"text-filter\">\r\n                <label for=\"textfilter\">\r\n                  <input name=\"textfilter\" type=\"text\" placeholder=\"Filter/Search\"\r\n                  v-model=\"filter\" />\r\n                </label>\r\n              </div>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Surname</th>\r\n                <th>Company</th>\r\n                <th>Badge link</th>\r\n                <th>Attended</th>\r\n              </tr>\r\n              <tr v-for=\"i in filteredRows\" :key=\"i.id\">\r\n                <td v-html=\"i.name\"></td>\r\n                <td v-html=\"i.surname\"></td>\r\n                <td v-html=\"i.company\"></td>\r\n                <td><a :href=\"i.badge_link\" target=\"_blank\">Badge</a></td>\r\n                <td>\r\n                  <label :for=\"i.id\">\r\n                    <input type=\"checkbox\"\r\n                      :id=\"i.id\"\r\n                      :checked=\"i.attended\"\r\n                      @change=\"updateAttendance(i.id)\"\r\n                    />\r\n                  </label>\r\n                </td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n          <div class=\"ad-hoc-registration-form\">\r\n            <form @submit.prevent=\"adHocRegistration()\">\r\n              <h3>Add new registration</h3>\r\n          <div class=\"double\">\r\n            <label for=\"fname\">First name (Required)\r\n              <input type=\"text\" id=\"fname\" v-model=\"newreg.name\"/></label>\r\n\r\n            <label for=\"lname\">Last name (Required)\r\n              <input type=\"text\" id=\"lname\" v-model=\"newreg.surname\"/></label>\r\n          </div>\r\n\r\n          <div class=\"double\">\r\n            <label for=\"company\">Company (Required)\r\n              <input type=\"text\" id=\"company\" v-model=\"newreg.company\"/></label>\r\n\r\n            <label for=\"website\">Website\r\n              <input type=\"url\" id=\"website\" v-model=\"newreg.website\"/></label>\r\n          </div>\r\n\r\n          <div class=\"company_type_wrapper\">\r\n                <p>Company type</p>\r\n                <label for=\"company_type\">\r\n                  <select name=\"company_type\" id=\"company_type\" v-model=\"newreg.my_company_is\">\r\n                      <option value=\"Brand, Retailer, Manufacturer or Online Shop\">\r\n                        Brand, Retailer, Manufacturer or Online Shop</option>\r\n                      <option value=\"Investor, Family Office,\">\r\n                        Investor, Family Office, Business Angel</option>\r\n                      <option value=\"Media &amp; Press\">\r\n                        Media / Press / Journalism</option>\r\n                      <option value=\"Public Administration / Institution\">\r\n                        Public Administration / Institution</option>\r\n                      <option value=\"Research Institute, University, School\">\r\n                        Research Institute, University, School</option>\r\n                      <option value=\"Vendor / Supplier of Services\">\r\n                        Vendor / Supplier of Services for Innovation and e-Commerce</option>\r\n                      <option value=\"Other\">Other</option>\r\n                  </select>\r\n                </label>\r\n            </div>\r\n            <div>\r\n              <label for=\"role\">Role\r\n                <input type=\"text\" id=\"role\" v-model=\"newreg.role\"/></label>\r\n            </div>\r\n            <div>\r\n              <label for=\"email\">Email address (Required)\r\n                <input type=\"email\" id=\"email\" v-model=\"newreg.email\"/></label>\r\n                <button class=\"form-button\">Submit</button>\r\n            </div>\r\n          </form>\r\n          </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport auth from '@/assets/auth';\r\nimport MessageAnnounce from './MessageAnnounce.vue';\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      announce: null,\r\n      registrationsDesk: [],\r\n      filter: '',\r\n      newreg: {\r\n        name: '',\r\n        surname: '',\r\n        company: '',\r\n        website: '',\r\n        my_company_is: '',\r\n        role: '',\r\n        email: '',\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    MessageAnnounce,\r\n  },\r\n  mounted() {\r\n    this.grabAllRegistrations();\r\n  },\r\n  computed: {\r\n    filteredRows() {\r\n      return this.registrationsDesk.filter((row) => {\r\n        const company = row.company.toString().toLowerCase();\r\n        const name = row.name.toLowerCase();\r\n        const surname = row.surname.toLowerCase();\r\n        const searchTerm = this.filter.toLowerCase();\r\n\r\n        return company.includes(searchTerm)\r\n      || name.includes(searchTerm)\r\n      || surname.includes(searchTerm);\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    async updateAttendance(id) {\r\n      console.log(id);\r\n    },\r\n    async grabAllRegistrations() {\r\n      this.registrationsList = [];\r\n      const url = auth.allRegistrations;\r\n      const headers = {\r\n        credentials: 'same-origin',\r\n        'Content-Type': 'application/json',\r\n        'X-WP-Nonce': this.nonce,\r\n      };\r\n      fetch(url, { method: 'GET', headers })\r\n        .then((result) => result.json())\r\n        .then((result) => { this.registrationsDesk = result; });\r\n    },\r\n    async adHocRegistration() {\r\n      if (!this.oneToEdit.name || !this.oneToEdit.surname || !this.oneToEdit.email\r\n      || !this.oneToEdit.company || !this.oneToEdit.office_phone) {\r\n        this.announce = ['Hold it right there...', 'You need to supply all required fields (name, surname, company, email.)'];\r\n        return;\r\n      }\r\n      const data = JSON.stringify(this.newreg);\r\n      const url = auth.adHocRegistration;\r\n      const headers = {\r\n        credentials: 'same-origin',\r\n        'Content-Type': 'application/json',\r\n        'X-WP-Nonce': this.nonce,\r\n      };\r\n      fetch(url, { method: 'POST', headers, body: data })\r\n        .then(this.oneToEdit = null)\r\n        .then((result) => result.json())\r\n        .then((result) => { this.announce = result; });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}